<div class="container">
    <button mat-raised-button color="primary" (click)="toggleForm()">Crear paciente</button>
  
    <mat-card *ngIf="showForm">
      <mat-card-header>
        <mat-card-title>{{ editingUser ? 'Editar paciente' : 'Crear paciente' }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <form [formGroup]="userForm" (ngSubmit)="saveUser()">
          <mat-form-field appearance="fill">
            <mat-label>Tipo de documento</mat-label>
            <mat-select formControlName="idDocumentType">
              <mat-option *ngFor="let option of options" [value]="option.value">
                {{ option.viewValue }}
              </mat-option>
            </mat-select>
          </mat-form-field>  
          <mat-form-field appearance="fill">
            <mat-label>Numero de documento</mat-label>
            <input matInput formControlName="documentNumber" />
          </mat-form-field>         
          <mat-form-field appearance="fill">
            <mat-label>Nombres</mat-label>
            <input matInput formControlName="firstName" />
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Apellidos</mat-label>
            <input matInput formControlName="lastName" />
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Fecha de nacimiento</mat-label>
            <input matInput formControlName="birthDate" />
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Genero</mat-label>
            <mat-select formControlName="idGender">
              <mat-option *ngFor="let optionsGender of optionsGender" [value]="optionsGender.value">
                {{ optionsGender.viewValue }}
              </mat-option>
            </mat-select>
          </mat-form-field> 
          <mat-form-field appearance="fill">
            <mat-label>Dirección</mat-label>
            <input matInput formControlName="address" />
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Telefono</mat-label>
            <input matInput formControlName="contactNumber" />
          </mat-form-field>
          <div class="button-group">
            <button mat-raised-button color="primary" type="submit">{{ editingUser ? 'Actualizar' : 'Crear' }}</button>
            <button mat-raised-button color="warn" type="button" (click)="toggleForm()">Cancel</button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  
    <mat-table [dataSource]="users" class="mat-elevation-z4">
      <ng-container matColumnDef="idDocumentType">
        <mat-header-cell *matHeaderCellDef>Tipo de documento</mat-header-cell>
        <mat-cell *matCellDef="let user">{{user.documentType}}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="documentNumber">
        <mat-header-cell *matHeaderCellDef>Documento</mat-header-cell>
        <mat-cell *matCellDef="let user">{{user.documentNumber}}</mat-cell>
      </ng-container>
  
      <ng-container matColumnDef="firstName">
        <mat-header-cell *matHeaderCellDef>Nombres</mat-header-cell>
        <mat-cell *matCellDef="let user">{{user.firstName}}</mat-cell>
      </ng-container>
  
      <ng-container matColumnDef="lastName">
        <mat-header-cell *matHeaderCellDef>Apellidos</mat-header-cell>
        <mat-cell *matCellDef="let user">{{user.lastName}}</mat-cell>
      </ng-container>
  
      <ng-container matColumnDef="birthDate">
        <mat-header-cell *matHeaderCellDef>Fecha de nacimiento</mat-header-cell>
        <mat-cell *matCellDef="let user">{{user.birthDate}}</mat-cell>
      </ng-container>

      <ng-container matColumnDef="idGender">
        <mat-header-cell *matHeaderCellDef>Genero</mat-header-cell>
        <mat-cell *matCellDef="let user">{{user.gender}}</mat-cell>
      </ng-container>

      <ng-container matColumnDef="address">
        <mat-header-cell *matHeaderCellDef>Dirección</mat-header-cell>
        <mat-cell *matCellDef="let user">{{user.address}}</mat-cell>
      </ng-container>

      <ng-container matColumnDef="contactNumber">
        <mat-header-cell *matHeaderCellDef>Numero de contacto</mat-header-cell>
        <mat-cell *matCellDef="let user">{{user.contactNumber}}</mat-cell>
      </ng-container>
  
      <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef>Acciones</mat-header-cell>
        <mat-cell *matCellDef="let user">
          <button mat-icon-button color="primary" (click)="editUser(user)">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="confirmDelete(user)">
            <mat-icon>delete</mat-icon>
          </button>
        </mat-cell>
      </ng-container>
  
      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
  </div>  